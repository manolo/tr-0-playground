<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Element Sizing Playground</title>
  <style>
    :root { --gap: 8px; }
    body { 
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Arial, "Apple Color Emoji", "Segoe UI Emoji"; 
      margin: 16px; 
    }
    h1 { margin: 0 0 12px; font-size: 1.25rem; }
    
    .main-layout { 
      display: grid; 
      grid-template-columns: 300px 1fr; 
      gap: 20px; 
      height: calc(100vh - 60px);
    }
    
    .controls-panel { 
      border: 1px solid #ccc; 
      border-radius: 12px; 
      padding: 16px; 
      background: #f9f9f9; 
      overflow-y: auto;
    }
    
    .container-panel {
      border: 1px solid #333;
      border-radius: 12px;
      padding: 16px;
      background: #f6f6f6;
      overflow: auto;
    }
    
    .flex-container { 
      display: flex; 
      width: 100%; 
      height: 400px; 
      border: 2px dashed #999; 
      background: #fff; 
      gap: var(--gap); 
      padding: 8px;
      box-sizing: border-box;
    }
    
    .item { 
      background: #2d6cdf; 
      color: #fff; 
      font-weight: 600; 
      display: flex; 
      align-items: center; 
      justify-content: center; 
      border-radius: 8px; 
      padding: 8px; 
      cursor: pointer;
      transition: all 0.2s ease;
      min-width: 40px;
      min-height: 40px;
      box-sizing: border-box;
    }
    
    .item:hover { background: #1a4fb8; }
    .item.selected { 
      background: #ff6b35; 
      box-shadow: 0 0 0 3px rgba(255, 107, 53, 0.3);
    }
    
    fieldset { 
      border: 1px solid #bbb; 
      border-radius: 8px; 
      padding: 12px; 
      margin-bottom: 16px;
    }
    legend { 
      padding: 0 8px; 
      font-weight: 600; 
      font-size: 0.9rem;
    }
    
    .control-group { 
      display: flex; 
      flex-direction: column; 
      gap: 8px; 
      margin-bottom: 12px;
    }
    
    .control-row { 
      display: flex; 
      align-items: center; 
      gap: 8px; 
    }
    
    .control-row label { 
      font-size: 0.85rem; 
      min-width: 80px;
    }
    
    .control-row input[type="range"] { 
      flex: 1; 
    }
    
    .control-row input[type="text"] { 
      width: 60px; 
      padding: 4px; 
      border: 1px solid #ccc; 
      border-radius: 4px;
      font-size: 0.85rem;
    }
    
    .radio-group { 
      display: flex; 
      flex-wrap: wrap; 
      gap: 8px; 
    }
    
    .radio-group label { 
      font-size: 0.8rem; 
      display: flex; 
      align-items: center; 
      gap: 4px;
    }
    
    .selected-item-info {
      background: #fff3cd;
      border: 1px solid #ffeaa7;
      border-radius: 6px;
      padding: 8px;
      margin-bottom: 16px;
      font-size: 0.85rem;
    }
    
    .btn { 
      cursor: pointer; 
      padding: 6px 12px; 
      border-radius: 6px; 
      border: 1px solid #888; 
      background: #fafafa; 
      font-size: 0.85rem;
      margin: 2px;
    }
    .btn:hover { background: #f0f0f0; }
    
    .info-display {
      background: #e3f2fd;
      border: 1px solid #90caf9;
      border-radius: 6px;
      padding: 8px;
      margin-top: 12px;
      font-size: 0.8rem;
      font-family: monospace;
    }
  </style>
</head>
<body>
  <h1>Element Sizing Playground</h1>
  
  <div class="main-layout">
    <div class="controls-panel">
      <div class="selected-item-info" id="selectedInfo">
        Click an element to select and modify its properties
      </div>
      
      <fieldset>
        <legend>Container Settings</legend>
        <div class="control-group">
          <div class="control-row">
            <label>Direction:</label>
            <div class="radio-group">
              <label><input type="radio" name="flexDirection" value="row" checked> row</label>
              <label><input type="radio" name="flexDirection" value="column"> column</label>
            </div>
          </div>
          <div class="control-row">
            <label>Wrap:</label>
            <div class="radio-group">
              <label><input type="radio" name="flexWrap" value="nowrap" checked> nowrap</label>
              <label><input type="radio" name="flexWrap" value="wrap"> wrap</label>
            </div>
          </div>
        </div>
      </fieldset>
      
      <fieldset id="elementControls" style="display: none;">
        <legend>Selected Element</legend>
        
        <div class="control-group">
          <div class="control-row">
            <label>Width:</label>
            <input type="range" id="widthRange" min="0" max="400" value="0">
            <input type="text" id="widthValue" placeholder="auto">
          </div>
          <div class="control-row">
            <label>Height:</label>
            <input type="range" id="heightRange" min="0" max="200" value="0">
            <input type="text" id="heightValue" placeholder="auto">
          </div>
        </div>
        
        <div class="control-group">
          <div class="control-row">
            <label>Flex Grow:</label>
            <input type="range" id="flexGrowRange" min="0" max="5" step="0.1" value="0">
            <input type="text" id="flexGrowValue" value="0">
          </div>
          <div class="control-row">
            <label>Flex Shrink:</label>
            <input type="range" id="flexShrinkRange" min="0" max="3" step="0.1" value="1">
            <input type="text" id="flexShrinkValue" value="1">
          </div>
          <div class="control-row">
            <label>Flex Basis:</label>
            <input type="range" id="flexBasisRange" min="0" max="300" value="0">
            <input type="text" id="flexBasisValue" placeholder="auto">
          </div>
        </div>
        
        <div class="control-group">
          <div class="control-row">
            <label>Min Width:</label>
            <input type="range" id="minWidthRange" min="0" max="200" value="0">
            <input type="text" id="minWidthValue" placeholder="0">
          </div>
          <div class="control-row">
            <label>Max Width:</label>
            <input type="range" id="maxWidthRange" min="0" max="400" value="400">
            <input type="text" id="maxWidthValue" placeholder="none">
          </div>
        </div>
        
        <div class="control-group">
          <div class="control-row">
            <label>Min Height:</label>
            <input type="range" id="minHeightRange" min="0" max="150" value="0">
            <input type="text" id="minHeightValue" placeholder="0">
          </div>
          <div class="control-row">
            <label>Max Height:</label>
            <input type="range" id="maxHeightRange" min="0" max="200" value="200">
            <input type="text" id="maxHeightValue" placeholder="none">
          </div>
        </div>
        
        <div class="control-group">
          <label>Align Self:</label>
          <div class="radio-group">
            <label><input type="radio" name="alignSelf" value="auto" checked> auto</label>
            <label><input type="radio" name="alignSelf" value="flex-start"> start</label>
            <label><input type="radio" name="alignSelf" value="center"> center</label>
            <label><input type="radio" name="alignSelf" value="flex-end"> end</label>
            <label><input type="radio" name="alignSelf" value="stretch"> stretch</label>
          </div>
        </div>
        
        <div class="control-row">
          <button class="btn" id="resetElement">Reset Element</button>
          <button class="btn" id="copyCSS">Copy CSS</button>
        </div>
        
        <div class="info-display" id="cssInfo"></div>
      </fieldset>
      
      <fieldset>
        <legend>Actions</legend>
        <div class="control-row">
          <button class="btn" id="addElement">Add Element</button>
          <button class="btn" id="removeElement">Remove Last</button>
          <button class="btn" id="resetAll">Reset All</button>
        </div>
      </fieldset>
    </div>
    
    <div class="container-panel">
      <div class="flex-container" id="container">
        <div class="item" data-index="0">1</div>
        <div class="item" data-index="1">2</div>
        <div class="item" data-index="2">3</div>
        <div class="item" data-index="3">4</div>
      </div>
    </div>
  </div>

  <script>
    const container = document.getElementById('container');
    const elementControls = document.getElementById('elementControls');
    const selectedInfo = document.getElementById('selectedInfo');
    const cssInfo = document.getElementById('cssInfo');
    let selectedElement = null;
    let elementCounter = 4;

    // Container controls
    document.querySelectorAll('input[name="flexDirection"]').forEach(radio => {
      radio.addEventListener('change', (e) => {
        container.style.flexDirection = e.target.value;
      });
    });

    document.querySelectorAll('input[name="flexWrap"]').forEach(radio => {
      radio.addEventListener('change', (e) => {
        container.style.flexWrap = e.target.value;
      });
    });

    // Element selection
    function selectElement(element) {
      // Remove previous selection
      document.querySelectorAll('.item').forEach(item => {
        item.classList.remove('selected');
      });
      
      selectedElement = element;
      element.classList.add('selected');
      
      // Show controls
      elementControls.style.display = 'block';
      selectedInfo.textContent = `Selected: Element ${element.textContent}`;
      
      // Update controls with current values
      updateControlsFromElement();
      updateCSSDisplay();
    }

    // Click handler for elements
    container.addEventListener('click', (e) => {
      if (e.target.classList.contains('item')) {
        selectElement(e.target);
      }
    });

    // Control synchronization
    function syncControl(rangeId, textId, property, unit = '') {
      const range = document.getElementById(rangeId);
      const text = document.getElementById(textId);
      
      range.addEventListener('input', () => {
        const value = range.value;
        text.value = value + unit;
        if (selectedElement) {
          if (value == 0 && (property.includes('width') || property.includes('height') || property === 'flexBasis')) {
            selectedElement.style[property] = 'auto';
          } else if (value == range.max && property.includes('max')) {
            selectedElement.style[property] = 'none';
          } else {
            selectedElement.style[property] = value + unit;
          }
          updateCSSDisplay();
        }
      });
      
      text.addEventListener('input', () => {
        if (selectedElement) {
          selectedElement.style[property] = text.value;
          updateCSSDisplay();
        }
      });
    }

    // Initialize controls
    syncControl('widthRange', 'widthValue', 'width', 'px');
    syncControl('heightRange', 'heightValue', 'height', 'px');
    syncControl('flexGrowRange', 'flexGrowValue', 'flexGrow');
    syncControl('flexShrinkRange', 'flexShrinkValue', 'flexShrink');
    syncControl('flexBasisRange', 'flexBasisValue', 'flexBasis', 'px');
    syncControl('minWidthRange', 'minWidthValue', 'minWidth', 'px');
    syncControl('maxWidthRange', 'maxWidthValue', 'maxWidth', 'px');
    syncControl('minHeightRange', 'minHeightValue', 'minHeight', 'px');
    syncControl('maxHeightRange', 'maxHeightValue', 'maxHeight', 'px');

    // Align self
    document.querySelectorAll('input[name="alignSelf"]').forEach(radio => {
      radio.addEventListener('change', (e) => {
        if (selectedElement) {
          selectedElement.style.alignSelf = e.target.value;
          updateCSSDisplay();
        }
      });
    });

    function updateControlsFromElement() {
      if (!selectedElement) return;
      
      const styles = getComputedStyle(selectedElement);
      
      // Update ranges and text inputs based on current element styles
      // This is a simplified version - in practice you'd want more robust parsing
      document.getElementById('flexGrowValue').value = selectedElement.style.flexGrow || '0';
      document.getElementById('flexGrowRange').value = selectedElement.style.flexGrow || '0';
      
      document.getElementById('flexShrinkValue').value = selectedElement.style.flexShrink || '1';
      document.getElementById('flexShrinkRange').value = selectedElement.style.flexShrink || '1';
    }

    function updateCSSDisplay() {
      if (!selectedElement) return;
      
      const relevantStyles = [];
      const style = selectedElement.style;
      
      if (style.width && style.width !== 'auto') relevantStyles.push(`width: ${style.width}`);
      if (style.height && style.height !== 'auto') relevantStyles.push(`height: ${style.height}`);
      if (style.flexGrow && style.flexGrow !== '0') relevantStyles.push(`flex-grow: ${style.flexGrow}`);
      if (style.flexShrink && style.flexShrink !== '1') relevantStyles.push(`flex-shrink: ${style.flexShrink}`);
      if (style.flexBasis && style.flexBasis !== 'auto') relevantStyles.push(`flex-basis: ${style.flexBasis}`);
      if (style.minWidth && style.minWidth !== '0px') relevantStyles.push(`min-width: ${style.minWidth}`);
      if (style.maxWidth && style.maxWidth !== 'none') relevantStyles.push(`max-width: ${style.maxWidth}`);
      if (style.minHeight && style.minHeight !== '0px') relevantStyles.push(`min-height: ${style.minHeight}`);
      if (style.maxHeight && style.maxHeight !== 'none') relevantStyles.push(`max-height: ${style.maxHeight}`);
      if (style.alignSelf && style.alignSelf !== 'auto') relevantStyles.push(`align-self: ${style.alignSelf}`);
      
      cssInfo.textContent = relevantStyles.length > 0 ? relevantStyles.join(';\n') + ';' : 'No custom styles applied';
    }

    // Action buttons
    document.getElementById('addElement').addEventListener('click', () => {
      elementCounter++;
      const newElement = document.createElement('div');
      newElement.className = 'item';
      newElement.textContent = elementCounter;
      newElement.setAttribute('data-index', elementCounter - 1);
      container.appendChild(newElement);
    });

    document.getElementById('removeElement').addEventListener('click', () => {
      const items = container.querySelectorAll('.item');
      if (items.length > 1) {
        const lastItem = items[items.length - 1];
        if (lastItem === selectedElement) {
          selectedElement = null;
          elementControls.style.display = 'none';
          selectedInfo.textContent = 'Click an element to select and modify its properties';
        }
        lastItem.remove();
        elementCounter--;
      }
    });

    document.getElementById('resetElement').addEventListener('click', () => {
      if (selectedElement) {
        selectedElement.removeAttribute('style');
        selectedElement.classList.remove('selected');
        selectedElement.classList.add('selected'); // Re-add selection styling
        updateControlsFromElement();
        updateCSSDisplay();
      }
    });

    document.getElementById('resetAll').addEventListener('click', () => {
      document.querySelectorAll('.item').forEach(item => {
        item.removeAttribute('style');
        item.classList.remove('selected');
      });
      selectedElement = null;
      elementControls.style.display = 'none';
      selectedInfo.textContent = 'Click an element to select and modify its properties';
    });

    document.getElementById('copyCSS').addEventListener('click', () => {
      if (selectedElement && cssInfo.textContent !== 'No custom styles applied') {
        navigator.clipboard.writeText(`.item {\n  ${cssInfo.textContent.replace(/;\n/g, ';\n  ')}\n}`);
        alert('CSS copied to clipboard!');
      }
    });
  </script>
</body>
</html>